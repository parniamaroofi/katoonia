import{_ as D}from"./BLTjAdUL.js";import{O as y}from"./Bn6PYqT_.js";import{_ as P,t as g,v as m,x as t,z as a,A as l,I as V,Y as w,P as L,D as N,E as b,V as f,L as C,B as _,y as r,M as v,T as j,f as n,U as h}from"./DaplssYx.js";import"./Dudy9OWa.js";const B={name:"DigitizeFrontendOrders",setup(){const i=n({}),e=n([]),p=n(6),s=n(!1),x=n(1),d=n(!1),u=n(null),o=n(!0),c=h([{title:"#",key:"index",sortable:!1},{title:"شماره سفارش",key:"number"},{title:"نام کاربر",key:"customerName",sortable:!1},{title:"استان",key:"customerProvince"},{title:"تاریخ ثبت",key:"orderDate"},{title:"ساعت ثبت",key:"orderTime"},{title:"عملیات",key:"actions",align:"center",sortable:!1}]),k=h([{title:"#",key:"index",align:"center",sortable:!1},{title:"محصول",key:"product",align:"center",sortable:!1},{title:"مبلغ واحد",key:"productPrice",align:"center",sortable:!1},{title:"تعداد",key:"quantity",align:"center",sortable:!1},{title:"مبلغ نهایی",key:"finalPrice",align:"center",sortable:!1}]);return{order:i,items:e,columns:c,perPage:p,loading:s,orderDialog:d,currentPage:x,tableLoading:o,totalRecords:u,ordersColumn:k}},mounted(){this.getData()},methods:{getData(){this.tableLoading=!0,this.$axios.get(`${y}?page=${this.currentPage}&pageSize=${this.perPage}`).then(i=>{this.items=i.data.results,this.totalRecords=i.data.totalRecord,this.tableLoading=!1}).catch(i=>{this.tableLoading=!1})},openDialog(i){this.orderDialog=!0,this.loading=!0,this.$axios.get(`${y}/${i.id}`).then(e=>{this.order=e.data,this.loading=!1}).catch(e=>{this.loading=!1})}}},z={class:"h-full"},S={class:"h-full"},R=["onClick"],T={class:"bg-gray-100 p-4 flex justify-between align-center"},I={key:0,class:"py-10 text-center"},M={key:1,class:"p-6 grid grid-cols-2 gap-6 text-[14px] text-gray-500"},O={class:"col-span-2 text-[15px] text-gray-700"},U={class:"pr-1",dir:"ltr"},E={class:"flex justify-between"},F={class:"pr-1"},q={class:"flex justify-between"},A={class:"pr-1"},Y={class:"flex justify-between"},G={class:"pr-1"},H={class:"flex justify-between"},J={class:"pr-1"},K={class:"flex justify-between"},Q={class:"pr-1"},W={class:"flex justify-between"},X={class:"pr-1"},Z={class:"col-span-2 mt-6"};function $(i,e,p,s,x,d){const u=D;return g(),m("div",z,[t("section",S,[a(v,{items:s.items,headers:s.columns,loading:s.tableLoading,"fixed-header":"","no-data-text":"آیتمی برای نمایش وجود ندارد","hide-default-footer":"",class:"h-full rounded-[10px]"},{"item.index":l(({index:o})=>[t("div",null,r((s.currentPage-1)*s.perPage+1+o),1)]),"item.number":l(({item:o})=>[t("div",null,r(`#${o.number}`),1)]),"item.orderDate":l(({item:o})=>[t("div",null,r(o.orderDate.split(" ")[0]),1)]),"item.actions":l(({item:o})=>[t("div",null,[a(N,{transition:"scale-transition"},{activator:l(({props:c})=>[a(f,C({color:"grey"},c),{default:l(()=>e[4]||(e[4]=[_("mdi-dots-vertical")])),_:2},1040)]),default:l(()=>[a(b,{class:"p-1.5 flex"},{default:l(()=>[t("div",{class:"flex flex-col align-center p-2 rounded-lg hover:bg-gray-100 cursor-pointer duration-300 min-w-[90px]",onClick:c=>d.openDialog(o)},[a(f,{icon:"svg:show",class:"stroke-gray-500",size:"small"}),e[5]||(e[5]=t("span",{class:"text-[11px] text-gray-500 font-semibold mt-1"},"مشاهده جزئیات",-1))],8,R)]),_:2},1024)]),_:2},1024)])]),bottom:l(()=>[s.items.length?(g(),V(w,{key:0,class:"my-4",color:"primary","total-visible":5,density:"comfortable",modelValue:s.currentPage,"onUpdate:modelValue":e[0]||(e[0]=o=>s.currentPage=o),length:Math.ceil(s.totalRecords/s.perPage),onClick:e[1]||(e[1]=o=>d.getData())},null,8,["modelValue","length"])):L("",!0)]),_:2},1032,["items","headers","loading"])]),a(j,{modelValue:s.orderDialog,"onUpdate:modelValue":e[3]||(e[3]=o=>s.orderDialog=o),width:"900"},{default:l(()=>[a(b,{class:"rounded-large"},{default:l(()=>[t("div",T,[e[7]||(e[7]=t("span",{class:"text-[18px]"}," جزئیات سفارش ",-1)),a(f,{size:"large",color:"red",onClick:e[2]||(e[2]=o=>s.orderDialog=!1)},{default:l(()=>e[6]||(e[6]=[_("mdi-close-circle-outline")])),_:1})]),s.loading?(g(),m("div",I,[a(u,{color:"#F56D21",class:"mx-auto"})])):(g(),m("div",M,[t("div",O,[e[8]||(e[8]=t("strong",null,"شماره سفارش:",-1)),t("strong",U,r(s.order.number),1)]),t("div",E,[e[9]||(e[9]=t("strong",null,"تاریخ سفارش:",-1)),t("span",F,r(s.order.orderDate.split(" ")[0]),1)]),t("div",q,[e[10]||(e[10]=t("strong",null,"وضعیت سفارش:",-1)),t("span",A,r(s.order.status),1)]),t("div",Y,[e[11]||(e[11]=t("strong",null,"تحویل گیرنده:",-1)),t("span",G,r(`${s.order.user.firstName} ${s.order.user.lastName}`),1)]),t("div",H,[e[12]||(e[12]=t("strong",null,"شماره موبایل:",-1)),t("span",J,r(s.order.user.mobile),1)]),t("div",K,[e[13]||(e[13]=t("strong",null,"آدرس:",-1)),t("span",Q,"استان "+r(s.order.user.province),1)]),t("div",W,[e[14]||(e[14]=t("strong",null,"مبلغ پرداخت شده:",-1)),t("span",X,r(Number(s.order.totalPrice).toLocaleString())+" تومان",1)]),t("div",Z,[e[15]||(e[15]=t("strong",null,"فاکتور:",-1)),a(v,{items:s.order.orderItems,headers:s.ordersColumn,"fixed-header":"","no-data-text":"آیتمی برای نمایش وجود ندارد","hide-default-footer":"",class:"mt-2"},{"item.index":l(({index:o})=>[t("div",null,r(o+1),1)]),"item.product":l(({item:o})=>[t("div",null,r(`${o.product.name} - رنگ ${o.product.color}`),1)]),"item.productPrice":l(({item:o})=>[t("div",null,r(`${Number(o.product.price).toLocaleString()} تومان`),1)]),"item.finalPrice":l(({item:o})=>[t("div",null,r(`${Number(o.price).toLocaleString()} تومان`),1)]),_:2},1032,["items","headers"])])]))]),_:1})]),_:1},8,["modelValue"])])}const le=P(B,[["render",$]]);export{le as default};
