import{C,P as w}from"./Bn6PYqT_.js";import{_ as D,t as u,v as h,x as o,z as i,A as a,V as g,B as d,O as L,N as T,$ as _,C as p,I as v,Y as U,P as z,D as B,E as b,F as A,G as F,H as N,J as j,K as R,y as x,L as E,M,T as S,f as r,U as q}from"./DaplssYx.js";import{s as G}from"./Bw9zdeb-.js";const H={name:"DigitizeFrontendProducts",setup(){const l=r([]),e=r(8),m=r(""),t=r(""),y=r([]),c=r(1),s=r(!1),n=r(null),f=r(null),V=r(!1),k=q([{title:"#",key:"index",sortable:!1},{title:"تصویر",key:"image",sortable:!1},{title:"نام محصول",key:"name"},{title:"دسته‌بندی",key:"category"},{title:"برند",key:"brand"},{title:"عملیات",key:"actions",align:"center",sortable:!1}]),P=r(!0),I=r(!1);return{items:l,search:m,perPage:e,columns:k,loading:s,interval:t,categoryId:n,categories:y,currentPage:c,totalRecord:f,tableLoading:P,categoriesLoading:V,deleteConfirmation:I}},mounted(){this.getData(),this.getCategories()},methods:{actionItems(l){return[{icon:"svg:edit",title:"ویرایش محصول",function:()=>this.goToProduct("edit",l)}]},goToProduct(l,e){this.$router.push({path:"adminProducts/product",query:{action:l,id:l=="edit"?e.id:void 0}})},async getData(){this.tableLoading=!0;const l=this.categoryId?`&categoryId=${this.categoryId}`:"",e=this.search?`&search=${this.search}`:"",{data:m}=await this.$axios.get(`${w}?page=${this.currentPage}&pageSize=${this.perPage}${e}${l}`);this.items=m.results,this.totalRecord=m.totalRecord,this.tableLoading=!1},updateList(){this.search?(clearInterval(this.interval),this.interval=G(()=>{this.items=[],this.getData(),clearInterval(this.interval)},500)):(this.items=[],this.search="",this.getData()),this.currentPage=1},async getCategories(){this.categoriesLoading=!0;const{data:l}=await this.$axios.get(C);this.categories=l,this.categoriesLoading=!1},errorImage(l){l.target.src="/images/product.png"}},watch:{categoryId(l){this.getData()},currentPage(){this.items=[],this.getData()}}},J={class:"h-full"},K={class:"text-left mb-1 flex justify-between gap-x-4"},O={class:"w-full grid grid-cols-2 gap-x-4"},Y={class:"h-[calc(100%-50px)] mt-6"},Q={class:"py-1"},W=["src"],X={class:"flex gap-x-2.5 items-center px-1"},Z={class:"text-[13px] text-gray-500 font-semibold"},$={class:"p-5 text-center"},ee={class:"flex justify-between align-center bg-[#FA2D110D] w-fit pa-5 rounded-[8px] mx-auto mb-5"},te={class:"text-[14px] mt-1"},ae={class:"font-bold"},se={class:"mt-6 flex justify-between w-full"};function oe(l,e,m,t,y,c){return u(),h("div",J,[o("div",K,[o("div",O,[i(L,{modelValue:t.search,"onUpdate:modelValue":[e[0]||(e[0]=s=>t.search=s),c.updateList],clearable:"",hideDetails:"",color:"primary",variant:"solo",density:"comfortable",placeholder:"در عنوان محصول جستجو کنید"},{"prepend-inner":a(()=>[i(g,{class:"stroke-primary"},{default:a(()=>e[8]||(e[8]=[d("svg:magnify")])),_:1}),e[9]||(e[9]=o("span",{class:"text-primary pr-2 text-[14px]"},"جستجو:",-1))]),_:1},8,["modelValue","onUpdate:modelValue"]),i(_,{modelValue:t.categoryId,"onUpdate:modelValue":e[1]||(e[1]=s=>t.categoryId=s),items:t.categories,loading:t.categoriesLoading,class:T(t.categoriesLoading?"pointer-events-none opacity-50":""),clearable:"",hideDetails:"",variant:"solo",color:"primary","item-value":"id","item-title":"name",density:"comfortable",placeholder:"یک دسته‌بندی انتخاب کنید"},{"prepend-inner":a(()=>[i(g,{class:"stroke-primary"},{default:a(()=>e[10]||(e[10]=[d("svg:categories")])),_:1}),e[11]||(e[11]=o("span",{class:"text-primary pr-2 text-[14px]"},"دسته‌بندی:",-1))]),_:1},8,["modelValue","items","loading","class"])]),i(p,{class:"btn bg-primary h-[48px] w-[180px]",onClick:e[2]||(e[2]=s=>c.goToProduct("new",void 0))},{default:a(()=>[i(g,{class:"ml-1 stroke-white",size:"small"},{default:a(()=>e[12]||(e[12]=[d("svg:plus")])),_:1}),e[13]||(e[13]=d(" افزودن محصول "))]),_:1})]),o("section",Y,[i(M,{items:t.items,headers:t.columns,loading:t.tableLoading,"fixed-header":"","no-data-text":"آیتمی برای نمایش وجود ندارد","hide-default-footer":"",class:"h-full rounded-[10px]"},{"item.index":a(({index:s})=>[o("div",null,x((t.currentPage-1)*t.perPage+1+s),1)]),"item.image":a(({item:s})=>[o("div",Q,[o("img",{src:`${l.$cdnUrl}${s.image}`,onError:e[3]||(e[3]=(...n)=>c.errorImage&&c.errorImage(...n)),class:"size-12 object-cover mix-blend-darken rounded-[4px]"},null,40,W)])]),"item.actions":a(({item:s})=>[o("div",null,[i(B,{transition:"scale-transition"},{activator:a(({props:n})=>[i(g,E({color:"grey"},n),{default:a(()=>e[14]||(e[14]=[d("mdi-dots-vertical")])),_:2},1040)]),default:a(()=>[i(b,null,{default:a(()=>[i(A,{density:"comfortable"},{default:a(()=>[(u(!0),h(F,null,N(c.actionItems(s),(n,f)=>(u(),v(j,{key:f,onClick:n.function},{default:a(()=>[i(R,null,{default:a(()=>[o("div",X,[i(g,{icon:n.icon,class:"fill-[#7A7A7A] text-[21px]"},null,8,["icon"]),o("span",Z,x(n.title),1)])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),bottom:a(()=>[t.items.length?(u(),v(U,{key:0,class:"my-4",color:"primary","total-visible":5,density:"comfortable",modelValue:t.currentPage,"onUpdate:modelValue":e[4]||(e[4]=s=>t.currentPage=s),length:Math.ceil(t.totalRecord/t.perPage)},null,8,["modelValue","length"])):z("",!0)]),_:2},1032,["items","headers","loading"])]),i(S,{modelValue:t.deleteConfirmation,"onUpdate:modelValue":e[7]||(e[7]=s=>t.deleteConfirmation=s),width:"350"},{default:a(()=>[i(b,{class:"rounded-[30px]"},{default:a(()=>[o("div",$,[o("div",ee,[i(g,{icon:"svg:bigTrash"})]),e[19]||(e[19]=o("span",{class:"text-[18px] font-semibold"},"حذف دسته‌بندی",-1)),o("p",te,[e[15]||(e[15]=d(" آیا دسته‌بندی ")),o("span",ae,x(l.product.name),1),e[16]||(e[16]=d(" را حذف می‌کنید؟ "))]),o("div",se,[i(p,{flat:"",color:"red",height:"42",class:"w-[calc(100%/2-8px)]",onClick:e[5]||(e[5]=s=>l.doDelete()),loading:t.loading},{default:a(()=>e[17]||(e[17]=[d(" بله ")])),_:1},8,["loading"]),i(p,{variant:"outlined",color:"#ccc",height:"42",class:"w-[calc(100%/2-8px)]",onClick:e[6]||(e[6]=s=>t.deleteConfirmation=!1)},{default:a(()=>e[18]||(e[18]=[o("span",{class:"text-black"},"خیر",-1)])),_:1})])])]),_:1})]),_:1},8,["modelValue"])])}const ne=D(H,[["render",oe]]);export{ne as default};
