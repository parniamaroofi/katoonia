import{_ as q}from"./X1S6Nx99.js";import{_ as R}from"./CE8D51G6.js";import{_ as U}from"./CZJDIlp8.js";import{_ as A,t as i,v as d,x as s,z as a,A as l,V as b,B as h,af as F,C as T,N as y,y as m,G as L,H as I,a2 as j,ad as H,P as p,I as x,ae as w,ag as P,f as u,ao as M,a7 as Q,ap as B,aq as z,ar as S,W as O,as as G,at as W,U as J}from"./DaplssYx.js";import{e as K,d as X,C as Y,S as Z}from"./Bn6PYqT_.js";import{s as $}from"./Bw9zdeb-.js";import"./DRdyhPWe.js";import"./Dudy9OWa.js";const tt={name:"DigitizeFrontendProduct",props:["data"],setup(o){const t=u(o.data),n=u(null);return{product:t,hoveredBox:n}},mounted(){},methods:{hoverBox(o){this.hoveredBox=o.id},leaveBox(){this.hoveredBox=""},goToDetails(){this.$router.push({path:`${(this._.provides[P]||this.$route).path}/product`,query:{id:this.product.id}})},errorImage(o){o.target.src="/images/product.png"}}},et={class:"absolute w-full"},st=["src"],ot={class:"pt-5 flex flex-col justify-between h-[47.5%]"},lt={class:"flex justify-between items-center"},rt={class:"text-gray-400 text-[13.5px]"},at={dir:"ltr",class:"flex"},it={class:"text-[14px] leading-6 text-slate-800 mt-1 line-clamp-2 h-[3rem]"},nt={class:"mt-1"},dt={key:0,class:"text-gray-500 font-semibold text-[12.5px]"},ct={class:"font-semibold flex items-center -mt-0.5 text-[17px]"},ut={class:"text-[12px]"};function ft(o,t,n,e,V,c){var _,v;return i(),d("div",{class:"relative bg-white rounded-medium w-full duration-500 h-[424px]",onMouseover:t[2]||(t[2]=f=>c.hoverBox(e.product)),onMouseleave:t[3]||(t[3]=f=>c.leaveBox())},[s("div",{class:y(["absolute w-fit h-[60px] left-[50%] translate-x-[-50%] shadow-[0px_12px_24px_0px_#00000033] bg-white rounded-[12px] z-10 duration-500 p-2 flex gap-x-1 items-center",e.hoveredBox===e.product.id?"top-[-30px] opacity-100":"top-4 opacity-0"])},[a(T,{icon:"",class:"h-[48px] w-[48px] stroke-[#212121] hover:stroke-primary transition-all duration-300",onClick:c.goToDetails},{default:l(()=>[a(b,{size:"small"},{default:l(()=>t[4]||(t[4]=[h("svg:eye")])),_:1}),a(F,{activator:"parent",location:"bottom"},{default:l(()=>t[5]||(t[5]=[s("span",{class:"text-[12.5px]"},"مشاهده محصول",-1)])),_:1})]),_:1},8,["onClick"]),a(T,{icon:"",class:"h-[48px] w-[48px] stroke-[#212121] hover:stroke-primary transition-all duration-300"},{default:l(()=>[a(b,{size:"small"},{default:l(()=>t[6]||(t[6]=[h("svg:heart")])),_:1}),a(F,{activator:"parent",location:"bottom"},{default:l(()=>t[7]||(t[7]=[s("span",{class:"text-[12.5px]"},"افزودن به علاقه‌مندی‌",-1)])),_:1})]),_:1}),a(T,{icon:"",class:"h-[48px] w-[48px] stroke-[#212121] hover:stroke-primary transition-all duration-300"},{default:l(()=>[a(b,{size:"small"},{default:l(()=>t[8]||(t[8]=[h("svg:share")])),_:1}),a(F,{activator:"parent",location:"bottom"},{default:l(()=>t[9]||(t[9]=[s("span",{class:"text-[12.5px]"},"اشتراک گذاری",-1)])),_:1})]),_:1})],2),s("div",et,[s("div",{onClick:t[1]||(t[1]=(...f)=>c.goToDetails&&c.goToDetails(...f)),class:"aspect-square bg-gray-100 rounded-small flex justify-center items-center cursor-pointer"},[s("img",{src:`${o.$cdnUrl}${e.product.mainImage}`,onError:t[0]||(t[0]=(...f)=>c.errorImage&&c.errorImage(...f)),class:"w-[140px] mix-blend-darken object-contain"},null,40,st)]),s("div",ot,[s("div",null,[s("div",lt,[s("span",rt,m(e.product.category),1),s("div",at,[(i(!0),d(L,null,I(e.product.hexColor,(f,C)=>(i(),d("div",{key:C,class:y(["size-6 rounded-full border-[2px] border-gray-100 overflow-hidden",C!=0?"-ml-[8px]":""]),style:j(`background-color: ${f}`)},null,6))),128))])]),s("p",it,m(e.product.name),1)]),a(H,{"model-value":5,readonly:"",size:"x-small",color:"#FFAA39",class:"custom-rating","full-icon":"svg:fullStar","empty-icon":"svg:emptyStar"}),s("div",nt,[(_=e.product.discountInfo)!=null&&_.discountPercent?(i(),d("s",dt,m(Number(e.product.discountInfo.reqularPrice).toLocaleString())+" تومان ",1)):p("",!0),s("p",ct,[h(m(Number(e.product.price).toLocaleString("fa-IR"))+" تومان ",1),(v=e.product.discountInfo)!=null&&v.discountPercent?(i(),x(w,{key:0,color:"red",class:"mr-2 h-5",variant:"flat",density:"compact"},{default:l(()=>{var f;return[s("span",ut,m((f=e.product.discountInfo)==null?void 0:f.discountPercent)+"%",1)]}),_:1})):p("",!0)])])])])],32)}const pt=A(tt,[["render",ft]]),mt=M("/images/noproducts.svg"),gt={name:"Main",setup(){const o=u(0),t=u([]),n=u([]),e=u(""),V=u([]),c=u([0,1,2,3]),_=u(1e8),v=u([]),f=u([]),C=u([]),r=u(1),g=u(!0),k=u(!1),D=u(!1),E=u({brands:[],colors:[],category:{},price:[null,null]}),N=J([{title:"محبوب‌ترین محصول",value:1},{title:"پربازدیدترین محصول",value:2},{title:"گران‌ترین محصول",value:3},{title:"ارزان‌ترین محصول",value:4}]);return{min:o,max:_,colors:t,slider:n,filter:E,interval:e,products:V,expansion:c,categories:v,filterItems:N,pageLoading:g,brandFilters:f,colorFilters:C,selectedFilter:r,productsLoading:k,categoriesLoading:D}},mounted(){this.slider=[this.min,this.max],this.getData()},methods:{async getData(){this.pageLoading=!0,await this.getCategories(),await this.getAllBrands(),await this.getColors(),await this.checkQuery(),await this.getAllProducts(),setTimeout(()=>{this.pageLoading=!1},100)},async getAllProducts(){this.productsLoading=!0,document.getElementsByTagName("html")[0].scrollIntoView({behavior:"smooth",block:"start"});const o=new URLSearchParams;o.append("page","1"),o.append("pageSize","20"),this.filter.category.id&&o.append("categoryId",this.filter.category.id),this.filter.colors.map(n=>n.id).forEach(n=>{o.append("colorIds",n)}),this.filter.brands.forEach(n=>{o.append("brands",n)}),this.slider[0]!=this.min&&o.append("minPrice",this.slider[0]),this.slider[1]!=this.max&&o.append("maxPrice",this.slider[1]);const{data:t}=await this.$axios.get(`${Z}?${o.toString()}`);this.products=t.results,this.products.forEach(n=>{n.hexColor=[...new Set(n.hexColor)]}),this.productsLoading=!1},async getCategories(){this.categoriesLoading=!0;const{data:o}=await this.$axios.get(Y);this.categories=o,this.categoriesLoading=!1},async getAllBrands(){const{data:o}=await this.$axios.get(`${X}`);this.brandFilters=o},async getColors(){const{data:o}=await this.$axios.get(`${K}?page=1&pageSize=200`);this.colorFilters=o},setTextColorBasedOnHex(o){const n=(V=>{const c=parseInt(V.slice(1),16),_=c>>16&255,v=c>>8&255,f=c&255;return{r:_,g:v,b:f}})(o);return .2126*n.r+.7152*n.g+.0722*n.b>128?"text-black":"text-white"},selectColor(o){if(this.filter.colors.some(t=>t.id==o.id)){const t=this.filter.colors.findIndex(n=>n.id==o.id);this.filter.colors.splice(t,1)}else this.filter.colors.push(o)},selectBrand(o){if(this.filter.brands.includes(o)){const t=this.filter.brands.findIndex(n=>n==o);this.filter.brands.splice(t,1)}else this.filter.brands.push(o)},async checkQuery(){(this._.provides[P]||this.$route).query.categoryId&&(this.filter.category=this.categories.filter(o=>o.id==(this._.provides[P]||this.$route).query.categoryId)[0]),(this._.provides[P]||this.$route).query.brand&&(this.filter.brands=[(this._.provides[P]||this.$route).query.brand])}},computed:{hasFilter(){return this.filter.brands.length||this.filter.colors.length||this.filter.category.id||this.slider[0]!=this.min||this.slider[1]!=this.max}},watch:{"filter.category":function(o){this.getAllProducts(),o!=null&&o.id||this.$router.push("/products")},"filter.brands":{handler(o){this.getAllProducts(),o.length||this.$router.push("/products")},deep:!0},"filter.colors":{handler(o){this.getAllProducts()},deep:!0},slider:{handler(o){clearInterval(this.interval),this.interval=$(()=>{this.getAllProducts(),clearInterval(this.interval)},600)},deep:!0},$route(){this.checkQuery()}}},xt={class:"flex gap-8 min-h-[70vh]"},ht={key:0,class:"w-[245px] min-w-[245px] bg-white min-h-[630px] h-fit rounded-[20px] border-[1px] border-gray-200 sticky top-5 p-6"},vt={class:"flex justify-between items-center"},yt={class:"flex flex-col gap-y-3 pt-2"},bt=["onClick"],_t={class:"text-[13px] font-semibold group-hover:mr-2"},kt={key:0,class:"mt-4 flex flex-wrap gap-1.5"},wt={class:"text-[12.5px]"},Ct={class:"mt-4 grid grid-cols-5 gap-2.5"},Vt=["onClick"],Lt={class:"mt-6"},It={key:1,class:"w-full"},Pt={class:"filters-box relative bg-white mb-5 w-full h-[64px] rounded-small flex items-center gap-x-4"},Bt={key:0,class:"font-semibold text-[18px]"},zt={key:1,class:"flex gap-x-3 items-center *:!text-[13px] *:text-gray-600"},St={class:"font-semibold"},Ft={class:"font-semibold"},Tt={class:"font-semibold"},Dt={class:"font-semibold"},At={class:"font-semibold"},jt={key:0},Et={key:0,class:"w-full h-[70vh] flex flex-col justify-center items-center"},Nt={key:0,class:"w-full h-[70vh] flex flex-col justify-center items-center"};function qt(o,t,n,e,V,c){const _=q,v=R,f=U,C=pt;return i(),d("div",null,[e.pageLoading?(i(),x(_,{key:0})):p("",!0),s("div",xt,[e.pageLoading?p("",!0):(i(),d("section",ht,[s("div",vt,[t[10]||(t[10]=s("span",{class:"font-semibold"},"فیلترها",-1)),a(b,{size:"small"},{default:l(()=>t[9]||(t[9]=[h("svg:sort")])),_:1})]),a(Q,{class:"opacity-60 my-4"}),s("div",null,[a(W,{class:"mt-5",flat:"",modelValue:e.expansion,"onUpdate:modelValue":t[3]||(t[3]=r=>e.expansion=r)},{default:l(()=>[a(B,null,{default:l(()=>[a(z,null,{actions:l(({expanded:r})=>[a(b,{size:"x-small",class:y([r?"rotate-180":"rotate-0","duration-300 fill-black"])},{default:l(()=>t[11]||(t[11]=[h("svg:chevronDown")])),_:2},1032,["class"])]),default:l(()=>[t[12]||(t[12]=s("div",{class:"flex gap-x-2.5 items-center"},[s("span",{class:"font-bold"},"دسته‌بندی")],-1))]),_:1}),a(S,null,{default:l(()=>[s("div",yt,[(i(!0),d(L,null,I(e.categories,(r,g)=>(i(),d("div",{key:g,onClick:k=>e.filter.category=r,class:"group cursor-pointer stroke-[#222F5D] text-gray-500 hover:text-primary hover:stroke-primary *:duration-500 flex items-center"},[s("span",_t,m(r.name),1)],8,bt))),128))])]),_:1})]),_:1}),a(B,null,{default:l(()=>[a(z,null,{actions:l(({expanded:r})=>[a(b,{size:"x-small",class:y([r?"rotate-180":"rotate-0","duration-300 fill-black"])},{default:l(()=>t[13]||(t[13]=[h("svg:chevronDown")])),_:2},1032,["class"])]),default:l(()=>[t[14]||(t[14]=s("div",{class:"flex gap-x-2.5 items-center"},[s("span",{class:"font-bold"},"برند محصول")],-1))]),_:1}),a(S,null,{default:l(()=>{var r;return[(r=e.brandFilters)!=null&&r.length?(i(),d("div",kt,[(i(!0),d(L,null,I(e.brandFilters,(g,k)=>(i(),x(w,{key:k,class:y(e.filter.brands.includes(g)?"bg-black":"opacity-70"),onClick:D=>c.selectBrand(g)},{default:l(()=>[s("span",wt,m(g),1)]),_:2},1032,["class","onClick"]))),128))])):p("",!0)]}),_:1})]),_:1}),a(B,null,{default:l(()=>[a(z,null,{actions:l(({expanded:r})=>[a(b,{size:"x-small",class:y([r?"rotate-180":"rotate-0","duration-300 fill-black"])},{default:l(()=>t[15]||(t[15]=[h("svg:chevronDown")])),_:2},1032,["class"])]),default:l(()=>[t[16]||(t[16]=s("div",{class:"flex gap-x-2.5 items-center"},[s("span",{class:"font-bold"},"رنگ محصول")],-1))]),_:1}),a(S,null,{default:l(()=>[s("div",Ct,[(i(!0),d(L,null,I(e.colorFilters,(r,g)=>(i(),d("div",{key:g,style:j(`background-color: ${r.hexCode}`),onClick:k=>c.selectColor(r),class:"w-full aspect-square rounded-full border flex items-center justify-center cursor-pointer"},[a(O,{name:"fade"},{default:l(()=>[e.filter.colors.some(k=>k.id==r.id)?(i(),x(b,{key:0,size:"x-small",class:y(c.setTextColorBasedOnHex(r.hexCode))},{default:l(()=>t[17]||(t[17]=[h("mdi-check")])),_:2},1032,["class"])):p("",!0)]),_:2},1024)],12,Vt))),128))])]),_:1})]),_:1}),a(B,null,{default:l(()=>[a(z,null,{actions:l(({expanded:r})=>[a(b,{size:"x-small",class:y([r?"rotate-180":"rotate-0","duration-300 fill-black"])},{default:l(()=>t[18]||(t[18]=[h("svg:chevronDown")])),_:2},1032,["class"])]),default:l(()=>[t[19]||(t[19]=s("div",{class:"flex gap-x-2.5 items-center"},[s("span",{class:"font-bold"},"محدوده قیمت")],-1))]),_:1}),a(S,null,{default:l(()=>[s("div",null,[a(G,{modelValue:e.slider,"onUpdate:modelValue":t[0]||(t[0]=r=>e.slider=r),max:e.max,min:e.min,"hide-details":"",color:"primary",step:1e6},null,8,["modelValue","max","min"])]),t[20]||(t[20]=s("div",{class:"flex justify-between text-[12.5px] font-semibold text-gray-600"},[s("span",null,"ارزان‌ترین"),s("span",null,"گران‌ترین")],-1)),s("div",Lt,[a(v,{modelValue:e.slider[0],"onUpdate:modelValue":t[1]||(t[1]=r=>e.slider[0]=r),separator:!0,label:"از قیمت",density:"compact",variant:"outlined",appendLabel:"تومان"},null,8,["modelValue"]),a(v,{modelValue:e.slider[1],"onUpdate:modelValue":t[2]||(t[2]=r=>e.slider[1]=r),separator:!0,label:"تا قیمت",density:"compact",variant:"outlined",appendLabel:"تومان"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])),e.pageLoading?p("",!0):(i(),d("section",It,[s("div",Pt,[c.hasFilter?(i(),d("div",zt,[e.filter.category.id?(i(),x(w,{key:0,closable:"","onClick:close":t[4]||(t[4]=r=>e.filter.category={}),color:"secondary"},{default:l(()=>[t[21]||(t[21]=s("strong",{class:"pl-1"},"دسته‌بندی:",-1)),s("span",St,m(e.filter.category.name),1)]),_:1})):p("",!0),e.filter.brands.length?(i(),x(w,{key:1,closable:"","onClick:close":t[5]||(t[5]=r=>e.filter.brands=[]),color:"secondary"},{default:l(()=>[t[22]||(t[22]=s("strong",{class:"pl-1"},"برندها:",-1)),s("span",Ft,m(e.filter.brands.join(", ")),1)]),_:1})):p("",!0),e.filter.colors.length?(i(),x(w,{key:2,closable:"","onClick:close":t[6]||(t[6]=r=>e.filter.colors=[]),color:"secondary"},{default:l(()=>[t[23]||(t[23]=s("strong",{class:"pl-1"},"رنگ‌ها:",-1)),s("span",Tt,m(e.filter.colors.map(r=>r.name).join(", ")),1)]),_:1})):p("",!0),e.slider[0]!=this.min?(i(),x(w,{key:3,closable:"","onClick:close":t[7]||(t[7]=r=>e.slider[0]=this.min),color:"secondary"},{default:l(()=>[t[24]||(t[24]=s("strong",{class:"pl-1"},"از قیمت:",-1)),s("span",Dt,m(Number(e.slider[0]).toLocaleString()),1)]),_:1})):p("",!0),e.slider[1]!=this.max?(i(),x(w,{key:4,closable:"","onClick:close":t[8]||(t[8]=r=>e.slider[1]=this.max),color:"secondary"},{default:l(()=>[t[25]||(t[25]=s("strong",{class:"pl-1"},"تا قیمت:",-1)),s("span",At,m(Number(e.slider[1]).toLocaleString()),1)]),_:1})):p("",!0)])):(i(),d("span",Bt,"همه محصولات"))]),e.pageLoading?p("",!0):(i(),d("div",jt,[e.productsLoading?(i(),d("div",Et,[a(f)])):(i(),d("div",{key:1,class:y(!e.productsLoading&&e.products.length?"grid 3xl:grid-cols-6 2xl:grid-cols-5 xl:grid-cols-4 gap-7":"w-full")},[e.products.length?(i(!0),d(L,{key:1},I(e.products,(r,g)=>(i(),x(C,{key:g,data:r},null,8,["data"]))),128)):(i(),d("div",Nt,t[26]||(t[26]=[s("img",{src:mt,class:"md:w-[184px] w-[150px] mx-auto grayscale mb-5"},null,-1),s("p",{class:"text-[14px]"},"محصولی برای نمایش وجود ندارد.",-1)])))],2))]))]))])])}const Jt=A(gt,[["render",qt]]);export{Jt as default};
